2019-12-27 17:02:50.483  INFO 51692 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 51692 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 17:02:50.490  INFO 51692 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 17:02:50.560  INFO 51692 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 17:02:50.560  INFO 51692 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 17:02:56.641  INFO 51692 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 17:02:56.647  INFO 51692 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 17:02:56.699  INFO 51692 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 13ms. Found 0 Redis repository interfaces.
2019-12-27 17:02:57.665  INFO 51692 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 17:02:59.529  INFO 51692 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 17:02:59.545  INFO 51692 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 17:02:59.545  INFO 51692 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 17:02:59.780  INFO 51692 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 17:02:59.780  INFO 51692 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 9219 ms
2019-12-27 17:03:00.020  INFO 51692 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.6570572734066328246.8808\]
2019-12-27 17:03:00.139  INFO 51692 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 17:03:01.533  INFO 51692 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 17:03:03.992  INFO 51692 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 17:03:07.617  WARN 51692 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : Unable to start LiveReload server
2019-12-27 17:03:07.823  INFO 51692 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2019-12-27 17:03:07.833  INFO 51692 --- [restartedMain] ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2019-12-27 17:03:07.876 ERROR 51692 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8808 was already in use.

Action:

Identify and stop the process that's listening on port 8808 or configure this application to listen on another port.

2019-12-27 17:03:08.039  INFO 51692 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Shutting down ExecutorService 'applicationTaskExecutor'
2019-12-27 17:03:08.045  INFO 51692 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2019-12-27 17:53:55.761  INFO 14240 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 14240 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 17:53:55.763  INFO 14240 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 17:53:55.815  INFO 14240 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 17:53:55.815  INFO 14240 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 17:53:56.859  INFO 14240 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 17:53:56.861  INFO 14240 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 17:53:56.885  INFO 14240 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2019-12-27 17:53:57.229  INFO 14240 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 17:53:57.784  INFO 14240 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 17:53:57.794  INFO 14240 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 17:53:57.795  INFO 14240 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 17:53:58.042  INFO 14240 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 17:53:58.043  INFO 14240 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2228 ms
2019-12-27 17:53:58.165  INFO 14240 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.3164978821906245687.8808\]
2019-12-27 17:53:58.324  INFO 14240 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 17:53:59.519  INFO 14240 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 17:54:00.057  INFO 14240 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 17:54:00.742  INFO 14240 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2019-12-27 17:54:00.843  INFO 14240 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8808 (http) with context path '/chat'
2019-12-27 17:54:00.852  INFO 14240 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Started ChatOnlineWebsocketApplication in 5.728 seconds (JVM running for 7.201)
2019-12-27 17:56:40.079  INFO 14240 --- [http-nio-8808-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-12-27 17:56:40.079  INFO 14240 --- [http-nio-8808-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2019-12-27 17:56:40.094  INFO 14240 --- [http-nio-8808-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 14 ms
2019-12-27 17:56:40.175  INFO 14240 --- [http-nio-8808-exec-3] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:56:41.181  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 17:56:41.182  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:null,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:10
2019-12-27 17:56:41.182  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 17:56:41.274 DEBUG 14240 --- [http-nio-8808-exec-7] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:56:41.517 DEBUG 14240 --- [http-nio-8808-exec-7] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 10(Integer), 1(Integer)
2019-12-27 17:56:41.732 DEBUG 14240 --- [http-nio-8808-exec-7] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 0
2019-12-27 17:56:41.734  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[]
2019-12-27 17:56:41.734 ERROR 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 发生错误
2019-12-27 17:56:41.736  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为0
2019-12-27 17:56:41.736  INFO 14240 --- [http-nio-8808-exec-7] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:[]
2019-12-27 17:57:08.185  INFO 14240 --- [http-nio-8808-exec-10] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:57:08.289  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 17:57:08.290  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:null,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:0
2019-12-27 17:57:08.290  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 17:57:08.290 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:57:08.291 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 0(Integer), 1(Integer)
2019-12-27 17:57:08.292 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 0
2019-12-27 17:57:08.292  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[]
2019-12-27 17:57:08.292 ERROR 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 发生错误
2019-12-27 17:57:08.293  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为0
2019-12-27 17:57:08.293  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:[]
2019-12-27 17:57:13.306  INFO 14240 --- [http-nio-8808-exec-15] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:57:13.400  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 17:57:13.401  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:null,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:20
2019-12-27 17:57:13.401  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 17:57:13.402 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:57:13.402 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:57:13.404 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:57:13.408  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:57:13.408 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:13.409 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:57:13.410 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:57:13.412 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:13.414 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 17:57:13.677 DEBUG 14240 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 17:57:13.678  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 17:57:13.687  INFO 14240 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 17:57:44.067  INFO 14240 --- [http-nio-8808-exec-19] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:57:44.215  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"15":{},"10":{}}
2019-12-27 17:57:44.215  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:15对方用户ID:null,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 17:57:44.217  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["15","10"]
2019-12-27 17:57:44.217 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:57:44.218 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:57:44.220 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:57:44.220  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:57:44.221 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:44.221 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:57:44.222 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:57:44.223 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:44.223 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 17:57:44.228 DEBUG 14240 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 17:57:44.228  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 17:57:44.230  INFO 14240 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 17:57:56.789  INFO 14240 --- [http-nio-8808-exec-26] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:57:56.804  INFO 14240 --- [http-nio-8808-exec-27] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为1
2019-12-27 17:57:56.804  INFO 14240 --- [http-nio-8808-exec-27] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:["10"]
2019-12-27 17:57:56.873  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"15":{},"10":{}}
2019-12-27 17:57:56.873  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:15对方用户ID:10,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 17:57:56.873  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["15","10"]
2019-12-27 17:57:56.874 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:57:56.874 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:57:56.875 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:57:56.876  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:57:56.876 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:56.876 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:57:56.877 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:57:56.878 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:57:56.879 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 17:57:56.885 DEBUG 14240 --- [http-nio-8808-exec-2] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 17:57:56.885  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 17:57:56.886  INFO 14240 --- [http-nio-8808-exec-2] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 17:58:10.104  INFO 14240 --- [http-nio-8808-exec-3] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:58:10.119  INFO 14240 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为1
2019-12-27 17:58:10.119  INFO 14240 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:["10"]
2019-12-27 17:58:10.189  INFO 14240 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"12":{},"10":{}}
2019-12-27 17:58:10.189  INFO 14240 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:12对方用户ID:10,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 17:58:10.189  INFO 14240 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["12","10"]
2019-12-27 17:58:10.190 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:58:10.191 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:58:10.191 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:58:10.192  INFO 14240 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:58:10.192 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:58:10.193 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:58:10.197 DEBUG 14240 --- [http-nio-8808-exec-8] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:58:15.163  INFO 14240 --- [http-nio-8808-exec-7] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:58:15.175  INFO 14240 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为1
2019-12-27 17:58:15.175  INFO 14240 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:["10"]
2019-12-27 17:58:15.242  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 17:58:15.242  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:20对方用户ID:10,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 17:58:15.242  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 17:58:15.244 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:58:15.244 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:58:15.245 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:58:15.245  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:58:15.246 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:58:15.246 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:58:15.247 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:58:15.248 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:58:15.249 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 17:58:15.256 DEBUG 14240 --- [http-nio-8808-exec-14] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 17:58:15.258  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 17:58:15.259  INFO 14240 --- [http-nio-8808-exec-14] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 17:58:25.078  INFO 14240 --- [http-nio-8808-exec-15] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 17:58:25.091  INFO 14240 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为1
2019-12-27 17:58:25.091  INFO 14240 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:["20"]
2019-12-27 17:58:25.159  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 17:58:25.159  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:20,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 17:58:25.159  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 17:58:25.160 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 17:58:25.160 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 17:58:25.162 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 17:58:25.162  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"adminId":15,"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 17:58:25.163 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, ADMIN_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:58:25.163 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 17:58:25.164 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 17:58:25.164 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 17:58:25.165 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 17:58:25.168 DEBUG 14240 --- [http-nio-8808-exec-19] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 17:58:25.169  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 17:58:25.170  INFO 14240 --- [http-nio-8808-exec-19] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:00:33.563  INFO 51864 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 51864 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 18:00:33.565  INFO 51864 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 18:00:33.622  INFO 51864 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 18:00:33.623  INFO 51864 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 18:00:34.337  INFO 51864 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 18:00:34.339  INFO 51864 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 18:00:34.363  INFO 51864 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2019-12-27 18:00:34.692  INFO 51864 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 18:00:35.129  INFO 51864 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 18:00:35.138  INFO 51864 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 18:00:35.139  INFO 51864 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 18:00:35.228  INFO 51864 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 18:00:35.228  INFO 51864 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1605 ms
2019-12-27 18:00:35.292  INFO 51864 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.8657164270132213888.8808\]
2019-12-27 18:00:35.341  INFO 51864 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 18:00:36.047  INFO 51864 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 18:00:36.538  INFO 51864 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 18:00:37.203  INFO 51864 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2019-12-27 18:00:37.265  INFO 51864 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8808 (http) with context path '/chat'
2019-12-27 18:00:37.267  INFO 51864 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Started ChatOnlineWebsocketApplication in 4.235 seconds (JVM running for 5.231)
2019-12-27 18:02:54.164  INFO 51864 --- [http-nio-8808-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-12-27 18:02:54.164  INFO 51864 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2019-12-27 18:02:54.174  INFO 51864 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 9 ms
2019-12-27 18:02:54.216  INFO 51864 --- [http-nio-8808-exec-1] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:02:54.901  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 18:02:54.901  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:20,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:20
2019-12-27 18:02:54.902  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 18:02:55.412 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:02:55.758 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:02:55.774 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:02:55.779  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:02:55.781 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:55.782 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:02:55.783 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:02:55.784 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:55.785 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:02:55.794 DEBUG 51864 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:02:55.795  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:02:55.803  INFO 51864 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:02:57.659  INFO 51864 --- [http-nio-8808-exec-7] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:02:57.682  INFO 51864 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为0
2019-12-27 18:02:57.682  INFO 51864 --- [http-nio-8808-exec-8] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:[]
2019-12-27 18:02:57.759  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 18:02:57.759  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:20,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:20
2019-12-27 18:02:57.759  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 18:02:57.759 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:02:57.760 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:02:57.761 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:02:57.761  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:02:57.762 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:57.762 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:02:57.764 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:02:57.765 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:57.765 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:02:57.771 DEBUG 51864 --- [http-nio-8808-exec-12] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:02:57.771  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:02:57.772  INFO 51864 --- [http-nio-8808-exec-12] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:02:58.965  INFO 51864 --- [http-nio-8808-exec-13] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:02:59.173  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 18:02:59.174  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:20对方用户ID:10,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 18:02:59.174  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 18:02:59.174 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:02:59.175 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:02:59.175 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:02:59.176  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:02:59.177 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:59.177 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:02:59.178 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:02:59.179 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:02:59.179 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:02:59.183 DEBUG 51864 --- [http-nio-8808-exec-17] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:02:59.184  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:02:59.185  INFO 51864 --- [http-nio-8808-exec-17] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:03:24.884  INFO 51864 --- [http-nio-8808-exec-18] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:03:24.995  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 18:03:24.996  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:20对方用户ID:0,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 18:03:24.996  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 18:03:24.996 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:03:24.997 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:03:24.998 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:03:24.998  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:03:24.999 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:03:24.999 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:03:25.001 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:03:25.001 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:03:25.002 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:03:25.009 DEBUG 51864 --- [http-nio-8808-exec-22] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:03:25.010  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:03:25.011  INFO 51864 --- [http-nio-8808-exec-22] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:30:29.309  INFO 40668 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 40668 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 18:30:29.312  INFO 40668 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 18:30:29.366  INFO 40668 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 18:30:29.367  INFO 40668 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 18:30:30.193  INFO 40668 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 18:30:30.195  INFO 40668 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 18:30:30.221  INFO 40668 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10ms. Found 0 Redis repository interfaces.
2019-12-27 18:30:30.560  INFO 40668 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 18:30:31.030  INFO 40668 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 18:30:31.041  INFO 40668 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 18:30:31.041  INFO 40668 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 18:30:31.132  INFO 40668 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 18:30:31.133  INFO 40668 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1766 ms
2019-12-27 18:30:31.208  INFO 40668 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.7422392072963389283.8808\]
2019-12-27 18:30:31.259  INFO 40668 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 18:30:31.957  INFO 40668 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 18:30:32.468  INFO 40668 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 18:30:33.134  INFO 40668 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2019-12-27 18:30:33.200  INFO 40668 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8808 (http) with context path '/chat'
2019-12-27 18:30:33.203  INFO 40668 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Started ChatOnlineWebsocketApplication in 4.471 seconds (JVM running for 5.544)
2019-12-27 18:32:11.672  INFO 43276 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 43276 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 18:32:11.687  INFO 43276 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 18:32:11.773  INFO 43276 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 18:32:11.773  INFO 43276 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 18:32:12.514  INFO 43276 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 18:32:12.516  INFO 43276 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 18:32:12.542  INFO 43276 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2019-12-27 18:32:12.877  INFO 43276 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 18:32:13.316  INFO 43276 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 18:32:13.327  INFO 43276 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 18:32:13.327  INFO 43276 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 18:32:13.413  INFO 43276 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 18:32:13.413  INFO 43276 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1639 ms
2019-12-27 18:32:13.493  INFO 43276 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.5737308005932194805.8808\]
2019-12-27 18:32:13.549  INFO 43276 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 18:32:14.245  INFO 43276 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 18:32:14.740  INFO 43276 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 18:32:15.387  INFO 43276 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2019-12-27 18:32:15.447  INFO 43276 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8808 (http) with context path '/chat'
2019-12-27 18:32:15.450  INFO 43276 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Started ChatOnlineWebsocketApplication in 4.303 seconds (JVM running for 5.239)
2019-12-27 18:32:56.575  INFO 43276 --- [http-nio-8808-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-12-27 18:32:56.575  INFO 43276 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2019-12-27 18:32:56.601  INFO 43276 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 25 ms
2019-12-27 18:32:56.709  INFO 43276 --- [http-nio-8808-exec-1] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:32:57.402  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 18:32:57.403  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:20,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:20
2019-12-27 18:32:57.403  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 18:32:57.487 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:32:57.620 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:32:57.637 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:32:57.642  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:32:57.642 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:32:57.643 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:32:57.645 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:32:57.646 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:32:57.647 DEBUG 43276 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:32:57.655 ERROR 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 发生错误
2019-12-27 18:32:57.657  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为0
2019-12-27 18:32:57.657  INFO 43276 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:[]
2019-12-27 18:34:23.105  INFO 42060 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Starting ChatOnlineWebsocketApplication on WUDG with PID 42060 (E:\desktop\git\websocket-online-chat\chat-online-websocket\target\classes started by Administrator in E:\desktop\git\websocket-online-chat\chat-online-websocket)
2019-12-27 18:34:23.108  INFO 42060 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : The following profiles are active: dev
2019-12-27 18:34:23.163  INFO 42060 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2019-12-27 18:34:23.163  INFO 42060 --- [restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2019-12-27 18:34:23.893  INFO 42060 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2019-12-27 18:34:23.895  INFO 42060 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2019-12-27 18:34:23.919  INFO 42060 --- [restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2019-12-27 18:34:24.261  INFO 42060 --- [restartedMain] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2019-12-27 18:34:24.686  INFO 42060 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8808 (http)
2019-12-27 18:34:24.695  INFO 42060 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2019-12-27 18:34:24.695  INFO 42060 --- [restartedMain] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.29]
2019-12-27 18:34:24.781  INFO 42060 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring embedded WebApplicationContext
2019-12-27 18:34:24.781  INFO 42060 --- [restartedMain] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1618 ms
2019-12-27 18:34:24.853  INFO 42060 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Set web app root system property: 'webapp.root' = [C:\Users\Administrator\AppData\Local\Temp\tomcat-docbase.5372678826841060151.8808\]
2019-12-27 18:34:24.907  INFO 42060 --- [restartedMain] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2019-12-27 18:34:25.605  INFO 42060 --- [restartedMain] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2019-12-27 18:34:26.114  INFO 42060 --- [restartedMain] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'
2019-12-27 18:34:26.772  INFO 42060 --- [restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2019-12-27 18:34:26.832  INFO 42060 --- [restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8808 (http) with context path '/chat'
2019-12-27 18:34:26.835  INFO 42060 --- [restartedMain] c.w.c.ChatOnlineWebsocketApplication     : Started ChatOnlineWebsocketApplication in 4.255 seconds (JVM running for 5.462)
2019-12-27 18:34:58.281  INFO 42060 --- [http-nio-8808-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/chat]   : Initializing Spring DispatcherServlet 'dispatcherServlet'
2019-12-27 18:34:58.281  INFO 42060 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2019-12-27 18:34:58.289  INFO 42060 --- [http-nio-8808-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 8 ms
2019-12-27 18:34:58.325  INFO 42060 --- [http-nio-8808-exec-1] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:34:59.098  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"10":{}}
2019-12-27 18:34:59.099  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:20,IP:192.168.56.1,当前在线人数为1,接入渠道ID为:20
2019-12-27 18:34:59.099  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["10"]
2019-12-27 18:34:59.184 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:34:59.303 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:34:59.322 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:34:59.328  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:34:59.328 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:34:59.329 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:34:59.330 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:34:59.332 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:34:59.333 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:34:59.341 DEBUG 42060 --- [http-nio-8808-exec-4] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:34:59.342  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:34:59.352  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:35:00.472  INFO 42060 --- [http-nio-8808-exec-6] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:35:00.615  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 18:35:00.615  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:20对方用户ID:10,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 18:35:00.616  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 18:35:00.616 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:35:00.617 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:35:00.618 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:35:00.618  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:35:00.619 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:35:00.619 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:35:00.621 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:35:00.622 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:35:00.622 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:35:00.627 DEBUG 42060 --- [http-nio-8808-exec-10] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:35:00.628  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:35:00.630  INFO 42060 --- [http-nio-8808-exec-10] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:41:09.239  INFO 42060 --- [http-nio-8808-exec-14] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:41:09.560  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"20":{},"10":{}}
2019-12-27 18:41:09.560  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:10对方用户ID:0,IP:192.168.56.1,当前在线人数为2,接入渠道ID为:20
2019-12-27 18:41:09.560  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["20","10"]
2019-12-27 18:41:09.562 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:41:09.563 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:41:09.563 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:41:09.564  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:41:09.564 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:41:09.564 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:41:09.565 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:41:09.566 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:41:09.566 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:41:09.570 DEBUG 42060 --- [http-nio-8808-exec-18] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:41:09.570  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:41:09.571  INFO 42060 --- [http-nio-8808-exec-18] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:41:17.106  INFO 42060 --- [http-nio-8808-exec-19] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:41:17.221  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"15":{},"20":{},"10":{}}
2019-12-27 18:41:17.221  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:15对方用户ID:0,IP:192.168.56.1,当前在线人数为3,接入渠道ID为:20
2019-12-27 18:41:17.222  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["15","20","10"]
2019-12-27 18:41:17.222 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:41:17.223 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:41:17.224 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:41:17.224  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:41:17.225 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:41:17.225 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:41:17.227 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:41:17.228 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:41:17.228 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:41:17.236 DEBUG 42060 --- [http-nio-8808-exec-23] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:41:17.236  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:41:17.237  INFO 42060 --- [http-nio-8808-exec-23] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:42:11.188  INFO 42060 --- [http-nio-8808-exec-29] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:11.431  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"15":{},"20":{},"10":{}}
2019-12-27 18:42:11.431  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:15对方用户ID:0,IP:192.168.56.1,当前在线人数为3,接入渠道ID为:20
2019-12-27 18:42:11.431  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["15","20","10"]
2019-12-27 18:42:11.432 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:42:11.432 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:42:11.433 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:42:11.434  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:42:11.434 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:42:11.435 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:42:11.436 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:42:11.437 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:42:11.437 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:42:11.443 DEBUG 42060 --- [http-nio-8808-exec-5] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:42:11.443  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:42:11.444  INFO 42060 --- [http-nio-8808-exec-5] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
2019-12-27 18:42:20.167  INFO 42060 --- [http-nio-8808-exec-2] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:20.209  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 有一连接关闭！当前在线人数为2
2019-12-27 18:42:20.209  INFO 42060 --- [http-nio-8808-exec-4] c.w.chatonlinewebsocket.utils.ChatUtil   : 现在在线用户ID:["20","10"]
2019-12-27 18:42:47.657  INFO 42060 --- [http-nio-8808-exec-14] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:49.893  INFO 42060 --- [http-nio-8808-exec-19] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:50.537  INFO 42060 --- [http-nio-8808-exec-24] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:50.871  INFO 42060 --- [http-nio-8808-exec-28] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:51.095  INFO 42060 --- [http-nio-8808-exec-2] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:51.337  INFO 42060 --- [http-nio-8808-exec-9] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:51.544  INFO 42060 --- [http-nio-8808-exec-14] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:51.765  INFO 42060 --- [http-nio-8808-exec-18] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:51.992  INFO 42060 --- [http-nio-8808-exec-22] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:42:59.722  INFO 42060 --- [http-nio-8808-exec-26] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:43:17.804  INFO 42060 --- [http-nio-8808-exec-4] c.w.c.ChatOnlineWebsocketApplication     : 真实IP:192.168.56.1
2019-12-27 18:43:17.968  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : websocketList->{"15":{},"20":{},"10":{}}
2019-12-27 18:43:17.968  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : 有新窗口开始监听:15对方用户ID:0,IP:192.168.56.1,当前在线人数为3,接入渠道ID为:20
2019-12-27 18:43:17.968  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : 此时全部在线用户ID:["15","20","10"]
2019-12-27 18:43:17.969 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? AND STATUS = ? group by ID 
2019-12-27 18:43:17.970 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer), 1(Integer)
2019-12-27 18:43:17.971 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 1
2019-12-27 18:43:17.972  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : 查询到DialogueDetailList:[{"channelId":20,"id":10,"status":1,"userId":10}]
2019-12-27 18:43:17.972 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : ==>  Preparing: select ID, USER_ID, STATUS, CREATE_TIME, CHANNEL_ID from dialogue_detail where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:43:17.973 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : ==> Parameters: 20(Integer)
2019-12-27 18:43:17.974 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.D.selectByDialogueDetail         : <==      Total: 3
2019-12-27 18:43:17.976 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.DialogueMapper.selectByDialogue  : ==>  Preparing: select ID, MESSAGE_TYPE, USER_IP, SENDER_ID,RECEIVE_ID, STATUS, CREATE_TIME, UPDATE_TIME,CHANNEL_ID , MESSAGE_CONTENT from dialogue where 1=1 AND CHANNEL_ID = ? group by ID 
2019-12-27 18:43:17.977 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.DialogueMapper.selectByDialogue  : ==> Parameters: 20(Integer)
2019-12-27 18:43:17.983 DEBUG 42060 --- [http-nio-8808-exec-9] c.w.c.d.DialogueMapper.selectByDialogue  : <==      Total: 5
2019-12-27 18:43:17.983  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : 是否是专家:{"code":200,"data":{"isExpert":false},"msg":"success"}
2019-12-27 18:43:17.984  INFO 42060 --- [http-nio-8808-exec-9] c.w.chatonlinewebsocket.utils.ChatUtil   : 根据表单ID拿到聊天记录:[{"channelId":20,"createTime":1577116800000,"id":44,"messageContent":"5oiR5pivMTA8YnI+","messageType":1,"receiveId":0,"senderId":10,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":45,"messageContent":"5oiR5pivMTU=","messageType":1,"receiveId":0,"senderId":15,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577116800000,"id":46,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":0,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":47,"messageContent":"5oiR5pivMjA=","messageType":1,"receiveId":10,"senderId":20,"status":0,"userIp":"192.168.56.1"},{"channelId":20,"createTime":1577203200000,"id":48,"messageContent":"5oiR5pivMTA=","messageType":1,"receiveId":20,"senderId":10,"status":0,"userIp":"192.168.56.1"}]
